<!-- announcements.html -->
<head>
  <title>Announcements</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
  <div class="container">
	
    <header>
    <img src="hardingBanner.jpg" width="100%"/>
      {{> loginButtons}}
      <p></p>
      {{#if currentUser}}	
        <button class="manage-subscriptions">
        {{#if showManageSubscriptions}}
          Show Announcements
        {{else}}
          Manage Subscriptions
        {{/if}}
        </button>
        <br>
        {{#if showManageSubscriptions}}
      	  {{#if isAdmin}}
            <form class="new-group">
              <input type="text" name="text" placeholder="Type to add a new group" />
            </form>
          {{/if}}
          <p></p>
          <ul>
            {{#each groups}}
              {{> group}}
            {{/each}}
          </ul>
          {{/if}}
        {{/if}}
    </header>
    {{#if showAnnouncements}}
      {{#if currentUser}}
        <div class="announcements">
        <h2>Announcements</h2>
        {{#each groups}}
          {{#if subscribed}}
            <p><h3>{{group}}</h3></p>
            <div id="{{group}}-heading">
              <form class="new-announcement" name="{{group}}">
              <input type="text" name="text" placeholder="Type to add a new announcement" />
              </form>
              <ul>
              {{#each announcements}}
                {{> announcement}}
              {{/each}}
              </ul>
            </div>
          {{/if}}
        {{/each}}
        </div>
      {{/if}}
    {{/if}}
  </div>
</body>

<template name="announcement">
  <div id="{{group}}-announcement"> 
    <li>
      {{#if hasRights}}
        <button class="delete">&times;</button>
      {{/if}}
      <span class="text"><strong>{{username}}</strong> - {{text}}</span>
    </li>
  </div>
</template>

<template name="group">
  <li>
  	{{#if hasRights}}
      <button class="delete-group">&times;</button>
      {{/if}}
      <button class="toggle-subscribe">
        {{#if subscribed}}
          Unsubscribe
        {{else}}
          Subscribe
        {{/if}}
      </button>
      <span class="text"><strong>{{group}}</strong></span>
  </li>
</template>
